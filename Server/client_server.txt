CLASS Client {
    Socket socket  

    FUNCTION Client() {
        socket = new Socket("Domain name", server port #)
    }

    FUNCTION closeSocket() {
        socket.close()
    }

    FUNCTION sendMessage(message) {
        OutputStream out = socket.getOutputStream();

        out.write(message.getBytes());
        out.flush();
        out.close();
    }

    FUNCTION main() {
        Client client = new Client()
        
        boolean isStopped = false
        WHILE (!isStopped) {
            PRINT("enter a message: ")
            INPUT(message)
            client.sendMessage(message)

            ...implement some way to stop client
        }

        client.closeSocket()
    }
}

// need thread on client side listening for messages from server



CLASS Server {
    ArrayList<> clientHandlerList  // do we want list of threads, ClientHandlers, or sockets?

    FUNCTION main() {
        clientHandlerList = new ArrayList<>()

        boolean isStopped = false
        WHILE (!isStopped) {
            socket = serverSocket.accept()
            Thread clientHandler = new Thread(new ClientHandler(socket, clientHandlerList)
            clientHandler.start()
            clientHandlerList.append(clientHandler)

            ...implement some way to stop server
        }

        FOR (clientHandler IN clientHandlerList) {
            // close all client handler resources
        }
    }
}



CLASS ClientHandler implements Runnable {
    Socket clientSocket  
    InputStream clientIn  
    OutputStream clientOut  
    ArrayList<ClientHandler> clientHandlerList
    
    public void run() {
        IF (!clientSocket.isConnected()) {
            // stop this thread and remove this instance from list
            // clean up resources
        }

        msg = clientIn.read()

        IF (msg contains sent data) {  // how do you tell if a user put data in the socket or not?
            FOR (clinetHandler IN clientHandlerList) {
                IF (clientHandler.getSocket() != clientSocket) {
                    clientHandler.sendMessageToClient(msg)
                }
            }
        }
    }

    FUNCTION ClientMessageHandler(socket, clientHandlerList) {
        clientSocket = socket
        clientHandlerList = clientHandlerList
        clientIn = socket.getInputStream()
        clientOut = socket.getOutputStream()
    }

    FUNCTION sendMessageToClient(msg) {
        out.write(msg.getBytes())
        out.flush()
    }

    FUNCTION getSocket() {
        return clientSocket
    }
}